100 ' Test unRLEWB to VRAM
101 DEFINT A-Z
110 COLOR 15,4,5
120 SCREEN 1
122 WIDTH 32
130 RESTORE 1020
140 DE=BASE(5)
150 GOSUB 9100
160 LOCATE 22,9
170 IF INKEY$="" THEN 170
190 END
1000 REM map size width:32 height:11
1010 REM RLE WB compressed - Original size= 352 - Compress size= 103
1020 DATA 24,128,29,23,25,22,128,29,32,22,22,128,29,32,22,22
1030 DATA 128,29,32,22,22,128,8,32,72,101,108,108,111,32,87,111
1040 DATA 114,108,100,33,128,8,32,22,22,128,29,32,22,22,128,29
1050 DATA 32,22,22,128,29,32,22,26,128,4,23,18,128,17,23,18
1060 DATA 128,4,23,27,128,5,32,22,32,80,114,101,115,115,32,97
1070 DATA 110,121,32,107,101,121,128,3,32,22,128,11,32,26,128,17
1080 DATA 23,27,128,5,32,128,255
9000 '=================================
9010 ' unRLEWB to VRAM for MSX BASIC
9020 ' Decompress RLEWB data to VRAM
9030 ' Input:
9040 '  RESTORE [line] <-- DATAs
9050 '              DE <-- VRAM address
9060 '=================================
9100 READ A
9110 IF A=&H80 THEN 9150
9120 VPOKE DE,A
9130 DE=DE+1
9140 GOTO 9100
9150 READ A
9160 IF A=&HFF THEN RETURN
9170 IF A=0 THEN A=&H80:GOTO 9120
9180 READ B
9190 FOR DE=DE TO DE+A
9200 VPOKE DE,B
9210 NEXT
9220 GOTO 9100