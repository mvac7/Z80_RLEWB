/* =============================================================================
  Test SDCC textmode MSXDOS Library
  
  Version: 1.0
  Date: 7/05/2018
  Author: mvac7/303bcn
  Architecture: MSX
  Format: .COM (MSXDOS)
  Programming language: C
  WEB: 
  mail: mvac7303b@gmail.com
   
  Description:
    Test textmode MSX DOS library
    
  History of versions:
  - v1.3 ( 7/05/2018) current version
  - v1.2 (27/03/2017)
  - v1.1 (27/02/2017) 
============================================================================= */

#include "../include/newTypes.h"
#include "../include/msxSystemVars.h"
#include "../include/msxBIOS.h"
#include "../include/msxDOS.h"

#include "../include/VDP_TMS9918A.h"
#include "../include/unRLEWBtoVRAM.h"

#define  HALT __asm halt __endasm   //wait for the next interrupt



// MSX-DOS Calls ---------------------------------------------------------------
#define  SYSTEM 0x0005  // MSX-DOS entry
//#define  RDSLT  0x000C  // Reads the value of an address in another slot
//#define  WRSLT  0x0014  // Writes a value to an address in another slot.
//#define  CALSLT 0x001C  // Executes inter-slot call.
//#define  ENASLT 0x0024  // Switches indicated slot at indicated page on perpetual
//#define  CALLF  0x0030  // Executes an interslot call




// Function Declarations -------------------------------------------------------
void System(char code);

char PEEK(uint address);
void POKE(uint address, char value);

char INKEY();

void WAIT(uint cicles);

void testRLEWB();



// constants  ------------------------------------------------------------------
// tileset EGYPTIAN SCREEN
// pattern data
// RLE WB compressed - Original size= 6144 - Final size= 1677
const char TILESET_pat[]={
0x80,0xFE,0x00,0x80,0xA5,0x00,0xE0,0x8F,0x3F,0x80,0x04,0x00,0x07,0x0E,0x03,0x80,
0xE8,0x00,0x07,0xFF,0xFF,0x80,0x03,0x00,0x07,0x80,0x03,0x00,0xE0,0x80,0x02,0x03,
0x1F,0x80,0x02,0xFF,0x03,0xC0,0xC0,0x00,0xE0,0xFF,0xFF,0x80,0xEB,0x00,0x03,0x80,
0x06,0x00,0xC0,0x80,0xFE,0x00,0x80,0xFE,0x00,0x80,0x32,0x00,0x01,0x03,0x07,0x0F,
0x1F,0x3F,0x00,0xC0,0xE0,0xF0,0xF8,0xFC,0xFE,0xFF,0x80,0x36,0x00,0x03,0x80,0x0E,
0x00,0xC0,0x00,0x1C,0xE1,0xC1,0xC1,0x81,0x80,0x00,0x90,0xFF,0x01,0x80,0x02,0xF0,
0xE0,0xC0,0xC1,0xFF,0x03,0x80,0x03,0x00,0x80,0x00,0x80,0x03,0x00,0x80,0x00,0xC0,
0xE0,0xE0,0xF0,0x80,0x81,0x00,0x01,0x03,0x07,0x0F,0x1F,0x3F,0x7F,0x80,0x0E,0xFF,
0x80,0x00,0xC0,0xE0,0xF0,0xF8,0xFC,0xFE,0xFF,0x80,0x2D,0x00,0x07,0x1F,0x1F,0x07,
0x80,0x03,0x00,0xFF,0xFF,0xF0,0xFE,0xFE,0x7F,0x1F,0x07,0x83,0xE1,0x67,0x07,0x07,
0x87,0xE7,0xF7,0xFF,0xFF,0x7C,0x7C,0xF8,0xF8,0x80,0x02,0xF7,0xFF,0x80,0x02,0x00,
0xFE,0x80,0x02,0xFF,0xC7,0x30,0x80,0x03,0x00,0x80,0x00,0xE0,0xF0,0x80,0x79,0x00,
0x01,0x03,0x07,0x0F,0x1F,0x3F,0x7F,0x80,0x1E,0xFF,0x80,0x00,0xC0,0xE0,0xF0,0xF8,
0xFC,0xFE,0xFF,0x80,0x19,0x00,0x01,0x03,0x03,0x80,0x02,0x00,0x7F,0xFF,0xFF,0xF0,
0x80,0x03,0x00,0xFF,0xFF,0x01,0x00,0x00,0x03,0x07,0x3F,0xF8,0xF8,0xFF,0x3F,0x0F,
0x80,0x02,0xFF,0x7F,0x7F,0x80,0x06,0xFF,0xFE,0xFC,0x80,0x02,0xFF,0xFE,0xFC,0x01,
0x00,0x00,0xC0,0xE0,0xF0,0xF8,0x7C,0xF0,0xF8,0x80,0x02,0x38,0x18,0x18,0x08,0x80,
0x21,0x00,0x01,0x03,0x07,0x0F,0x1F,0x3F,0x00,0xC0,0xE0,0xF0,0xF8,0xFC,0xFE,0xFF,
0x80,0x41,0x00,0x01,0x03,0x07,0x0F,0x1F,0x3F,0x7F,0x80,0x2E,0xFF,0x80,0x00,0xC0,
0xE0,0xF0,0xF8,0xFC,0xFE,0xFF,0x80,0x19,0x00,0x01,0x01,0x07,0x0F,0x0F,0x1F,0x7F,
0xFF,0xFC,0xFC,0xE0,0xC0,0x80,0x00,0x00,0xFF,0xFF,0x1F,0x1F,0x3E,0x3C,0x38,0x78,
0xFF,0xF7,0xCF,0x80,0x04,0x0F,0xF8,0xFC,0xFE,0xE0,0x80,0x03,0xF0,0xC3,0xE1,0xE1,
0xF1,0x70,0xF0,0xF8,0xF9,0x80,0x21,0xFF,0x01,0x03,0x07,0x0F,0x1F,0x3F,0x7F,0x80,
0x0E,0xFF,0x80,0x00,0xC0,0xE0,0xF0,0xF8,0xFC,0xFE,0xFF,0x80,0x31,0x00,0x01,0x03,
0x07,0x0F,0x1F,0x3F,0x7F,0x80,0x3E,0xFF,0x80,0x17,0x00,0xE1,0xC3,0xC3,0xC7,0xCF,
0xCF,0x80,0x09,0xFF,0x87,0x80,0x05,0x8F,0xCF,0xF0,0xF0,0x80,0x02,0xF8,0x80,0x02,
0xFC,0x07,0x07,0x87,0x83,0x83,0x80,0x02,0xC3,0x06,0x06,0x04,0x80,0x1E,0x00,0x01,
0x03,0x07,0x0F,0x1F,0x3F,0x7F,0x80,0x1E,0xFF,0x80,0x00,0xC0,0xE0,0xF0,0xF8,0xFC,
0xFE,0xFF,0x80,0x21,0x00,0x01,0x03,0x07,0x0F,0x1F,0x3F,0x7F,0x80,0x46,0xFF,0x80,
0x27,0x00,0x30,0x30,0x80,0x05,0x00,0x01,0x80,0x06,0x00,0xC1,0xC1,0xE0,0xE0,0x80,
0x02,0xF0,0xF8,0x80,0x04,0xFF,0x80,0x02,0x7F,0x80,0x11,0xFF,0x01,0x03,0x07,0x0F,
0x1F,0x3F,0x7F,0x80,0x2E,0xFF,0x80,0x00,0xC0,0xE0,0xF0,0xF8,0xFC,0xFE,0xFF,0x80,
0x11,0x00,0x01,0x03,0x07,0x0F,0x1F,0x3F,0x7F,0x80,0x4E,0xFF,0x80,0x37,0x00,0x80,
0x05,0x07,0x03,0x03,0x80,0x00,0x80,0x00,0x80,0x02,0xC0,0x80,0x02,0xE0,0x80,0x09,
0x00,0x01,0x03,0x07,0x0F,0x1F,0x3F,0x7F,0x80,0x3E,0xFF,0x80,0x00,0xC0,0xE0,0xF0,
0xF8,0xFC,0xFE,0xFF,0x00,0x00,0x01,0x03,0x07,0x0F,0x1F,0x3F,0x7F,0x80,0x56,0xFF,
0x80,0x37,0x00,0x80,0x02,0x03,0x80,0x03,0x01,0x00,0xE0,0xF0,0xF0,0x80,0x02,0xF8,
0xFC,0xFC,0x80,0x08,0x00,0xF0,0x80,0x06,0xFF,0x00,0xFF,0x00,0xFF,0xF0,0x80,0x02,
0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,
0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,
0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,
0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x03,0xFF,0x0F,0xFF,0x3F,
0xFF,0xF0,0x80,0x06,0xFF,0x00,0xFF,0x00,0xFF,0xF0,0x80,0x02,0xFF,0x00,0xFF,0x00,
0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,
0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,
0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,
0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,
0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0x80,0x3F,0xFF,0x03,
0x03,0x01,0x80,0x03,0x81,0xC0,0x80,0x15,0xFF,0x3F,0x3F,0xFF,0xF0,0x80,0x06,0xFF,
0x00,0xFF,0x00,0xFF,0xF0,0x80,0x02,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,
0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,
0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x03,0xFF,0x0F,0xFF,0x3F,0x80,
0x18,0xFF,0xF0,0x80,0x06,0xFF,0x00,0xFF,0x00,0xFF,0xF0,0x80,0x02,0xFF,0x00,0xFF,
0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,
0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,
0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,
0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0x80,0x3F,0xFF,
0x80,0x03,0xC0,0x80,0x03,0xE0,0x80,0x02,0xFF,0x80,0x04,0x7F,0xF0,0x01,0x00,0x00,
0x10,0x70,0x0C,0x0E,0x80,0x07,0xE0,0x80,0x02,0x00,0x30,0x30,0x78,0x7F,0x80,0x00,
0x80,0x02,0x00,0x18,0x18,0x38,0xFC,0xFC,0x00,0xF0,0x80,0x06,0xFF,0x00,0xFF,0x00,
0xFF,0xF0,0x80,0x02,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x03,
0xFF,0x0F,0xFF,0x3F,0x80,0x30,0xFF,0xF0,0x80,0x06,0xFF,0x00,0xFF,0x00,0xFF,0xF0,
0x80,0x02,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,
0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,
0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,
0xFF,0x00,0x80,0x3F,0xFF,0x80,0x07,0xE0,0x80,0x02,0x7F,0x80,0x04,0x3F,0xF0,0xF3,
0xF7,0x80,0x04,0xFF,0xE0,0x00,0xE1,0xE3,0xE7,0x80,0x02,0xFF,0x80,0x00,0x00,0x3F,
0x7F,0xFF,0x80,0x02,0x00,0x01,0x01,0x07,0x80,0x04,0x03,0x80,0x03,0x00,0x80,0x02,
0x80,0xC0,0x80,0x08,0x00,0xF0,0x80,0x4E,0xFF,0xF0,0x80,0x06,0xFF,0x00,0xFF,0x00,
0xFF,0xF0,0x80,0x02,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,
0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,
0xFF,0x00,0xFF,0x00,0x80,0x13,0xFF,0x07,0x1F,0x1F,0xFF,0x00,0x00,0x03,0xFF,0xFF,
0xF0,0x80,0x1B,0x00,0xE0,0xE0,0x80,0x03,0xFF,0x80,0x07,0xE0,0x80,0x07,0xC0,0x80,
0x07,0x00,0x80,0x00,0xC0,0xF8,0xF8,0x80,0x03,0xF9,0x80,0x04,0x00,0x80,0x02,0xC0,
0x80,0x04,0x03,0x80,0x02,0x06,0x80,0x07,0xC0,0x80,0x21,0x00,0x83,0x01,0x06,0x18,
0xE1,0x06,0x80,0x06,0x00,0xC3,0x80,0x38,0xFF,0xF0,0x80,0x06,0xFF,0x00,0xFF,0x00,
0xFF,0xF0,0x80,0x02,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x03,
0xFF,0x0F,0xFF,0x3F,0x80,0x0F,0xFF,0xC0,0x80,0x03,0xFF,0xE0,0xE0,0xFE,0x80,0x02,
0x00,0xE1,0xFF,0xFF,0xF8,0xFF,0x00,0x80,0x04,0xFF,0x7F,0xFF,0x4B,0x80,0x16,0xFF,
0x80,0x07,0xE0,0x80,0x07,0xC0,0x80,0x07,0x00,0x80,0x07,0x06,0x80,0x02,0xC0,0xE0,
0x80,0x03,0x60,0x80,0x07,0x06,0x80,0x07,0xC0,0x80,0x1D,0x00,0xE0,0xE0,0x00,0xC4,
0xC0,0x86,0x80,0x00,0x80,0x00,0x81,0xC3,0xC3,0x80,0x04,0x30,0xF0,0xF0,0x80,0x48,
0x00,0xF0,0x80,0x1D,0xFF,0x01,0x80,0x06,0x00,0xFF,0x1F,0x07,0x80,0x04,0x00,0xFF,
0xE0,0x80,0x15,0x00,0x01,0x01,0x1F,0x80,0x04,0xFF,0x80,0x04,0xE0,0x80,0x02,0xC0,
0x80,0x07,0x3F,0x80,0x07,0xFF,0x80,0x06,0x06,0x07,0x80,0x06,0x60,0xFF,0x80,0x06,
0x06,0xFF,0x80,0x07,0xC0,0x80,0x17,0x00,0x80,0x04,0x18,0x87,0x87,0xFF,0x1C,0x18,
0x08,0x08,0x80,0x02,0x0C,0x0E,0x80,0x83,0x00,0x80,0x02,0x01,0x80,0x04,0x00,0x80,
0x02,0xF0,0x7C,0x00,0x80,0x06,0x1F,0x80,0x02,0x00,0x80,0x02,0x01,0xFF,0xFF,0x80,
0x02,0x3F,0x80,0x03,0xFF,0xFC,0x80,0x04,0x00,0x80,0x02,0x07,0x80,0x07,0x00,0x07,
0x07,0x80,0x02,0x7F,0x80,0x02,0x78,0x80,0x06,0xFF,0x07,0x80,0x07,0xFF,0x80,0x04,
0xC0,0x80,0x1B,0x00,0x80,0x02,0x01,0x80,0x03,0x03,0x0E,0x0F,0x1F,0x1F,0x3F,0x7F,
0xFF,0x07,0x80,0x02,0x80,0x80,0x03,0xC0,0xE0,0x80,0x7F,0x00,0x83,0x80,0x00,0xF0,
0xF0,0x80,0x02,0xFC,0xFF,0xFC,0x3C,0x3C,0x80,0x03,0x00,0xFF,0x80,0x02,0x00,0xFC,
0xFC,0x80,0x02,0x00,0x80,0x02,0x03,0x80,0x04,0x00,0xF8,0xF8,0xF0,0x10,0x10,0x80,
0x02,0x00,0x80,0x03,0xFF,0x70,0x70,0x7E,0xFF,0x80,0x03,0x87,0x80,0x02,0x07,0x87,
0xF8,0xF8,0x80,0x05,0xFF,0x03,0x03,0x80,0x25,0xFF,0x03,0x03,0x07,0x06,0x80,0x03,
0x07,0xE0,0x80,0x00,0x80,0x05,0x00,0x60,0x34,0x3C,0x80,0x03,0x38,0xF8,0x80,0x8F,
0x00,0xFF,0x07,0x80,0x05,0x00,0xFF,0x7F,0x3F,0x3F,0x80,0x03,0x00,0x80,0x03,0xFF,
0x80,0x03,0x00,0x80,0x02,0xFC,0xE0,0x80,0x3B,0x00,0x07,0x07,0x80,0x05,0x00,0xFF,
0xFF,0x80,0x05,0x0F,0x80,0x07,0xF8,0x80,0xE7,0x00,0x01,0x01,0x80,0x05,0x00,0xFF,
0xFF,0x03,0x03,0x80,0x03,0x00,0xF8,0xFF,0xFF,0xF8,0x80,0x02,0x78,0x00,0x00,0x80,
0x05,0xC0,0x80,0x1A,0x00,0x87,0xFA,0xC2,0xBA,0x83,0x80,0x02,0xFF,0x1A,0xE9,0xEB,
0xEB,0x1B,0x80,0x02,0xFF,0x61,0xBE,0xF0,0xEE,0xE0,0x80,0x02,0xFF,0xA6,0x9B,0x80,
0x02,0xBB,0xFF,0xFF,0x7F,0x0C,0x7B,0x78,0x7B,0x9C,0xFF,0xFF,0xF7,0x76,0xAC,0x3E,
0xFE,0x7C,0x80,0x02,0xFF,0xE3,0xD9,0xD5,0xCD,0x63,0xFF,0x80,0xFF};




// color data
// RLE WB compressed - Original size= 6144 - Final size= 1385
const char TILESET_col[]={
0x80,0xFE,0x55,0x55,0x44,0x80,0x05,0x55,0x44,0x44,0x80,0x05,0x55,0x44,0x44,0x80,
0x05,0x55,0x44,0x44,0x80,0x05,0x55,0x44,0x44,0x80,0x05,0x55,0x44,0x44,0x80,0x05,
0x55,0x44,0x44,0x80,0x05,0x55,0x44,0x44,0x80,0x05,0x55,0x44,0x44,0x80,0x05,0x55,
0x44,0x44,0x80,0x05,0x55,0x44,0x44,0x80,0x05,0x55,0x44,0x44,0x80,0x05,0x55,0x44,
0x44,0x80,0x05,0x55,0x44,0x44,0x80,0x05,0x55,0x44,0x44,0x80,0x05,0x55,0x44,0x44,
0x80,0x05,0x55,0x44,0x44,0x80,0x05,0x55,0x44,0x44,0x80,0x05,0x55,0x44,0x44,0x80,
0x05,0x55,0x44,0x44,0x80,0x05,0x55,0x44,0x44,0x80,0x03,0x55,0x80,0x02,0x5F,0x44,
0x80,0x03,0x55,0x5F,0xE5,0xE4,0xE4,0x80,0x05,0x55,0x44,0x44,0x80,0x05,0x55,0x44,
0x44,0x80,0x05,0x55,0x44,0x44,0x80,0x05,0x55,0x44,0x44,0x80,0x05,0x55,0x44,0x44,
0x80,0x05,0x55,0x44,0x44,0x80,0x05,0x55,0x44,0x44,0x80,0x05,0x55,0x44,0x44,0x80,
0x05,0x55,0x44,0x44,0x80,0x05,0x55,0x44,0x44,0x80,0x04,0x55,0x80,0x02,0x44,0x80,
0x04,0x55,0x80,0x02,0x44,0x80,0x04,0x55,0x80,0x02,0x44,0x80,0x04,0x55,0x80,0x02,
0x44,0x80,0x04,0x55,0x80,0x02,0x44,0x80,0x04,0x55,0x80,0x02,0x44,0x80,0x04,0x55,
0x80,0x02,0x44,0x80,0x04,0x55,0x80,0x02,0x44,0x80,0x04,0x55,0x80,0x02,0x44,0x80,
0x04,0x55,0x80,0x02,0x44,0x80,0x04,0x55,0x80,0x02,0x44,0x80,0x04,0x55,0x80,0x02,
0x44,0x80,0x04,0x55,0x80,0x02,0x44,0x80,0x04,0x55,0x80,0x02,0x44,0x80,0x04,0x55,
0x80,0x02,0x44,0x80,0x04,0x55,0x80,0x02,0x44,0x80,0x04,0x55,0x80,0x02,0x44,0x80,
0x04,0x55,0x80,0x02,0x44,0x80,0x04,0x55,0x80,0x02,0x44,0x80,0x04,0xE5,0x44,0x44,
0x80,0x03,0x4E,0x00,0x50,0x80,0x06,0x04,0x50,0x80,0x02,0x04,0x80,0x04,0x05,0x80,
0x02,0x44,0x80,0x04,0x55,0x80,0x02,0x44,0x80,0x04,0x55,0x80,0x02,0x44,0x80,0x04,
0x55,0x80,0x02,0x44,0x80,0x04,0x55,0x80,0x02,0x44,0x80,0x04,0x55,0x80,0x02,0x44,
0x80,0x04,0x55,0x80,0x02,0x44,0x80,0x04,0x55,0x80,0x02,0x44,0x80,0x04,0x55,0x80,
0x02,0x44,0x80,0x04,0x55,0x80,0x02,0x44,0x80,0x03,0x55,0x80,0x03,0x44,0x80,0x03,
0x55,0x80,0x03,0x44,0x80,0x03,0x55,0x80,0x03,0x44,0x80,0x03,0x55,0x80,0x03,0x44,
0x80,0x03,0x55,0x80,0x03,0x44,0x80,0x03,0x55,0x80,0x03,0x44,0x80,0x03,0x55,0x80,
0x03,0x44,0x80,0x03,0x55,0x80,0x03,0x44,0x80,0x03,0x55,0x80,0x03,0x44,0x80,0x03,
0x55,0x80,0x03,0x44,0x80,0x03,0x55,0x80,0x03,0x44,0x80,0x03,0x55,0x80,0x03,0x44,
0x80,0x03,0x55,0x80,0x03,0x44,0x80,0x03,0x55,0x80,0x03,0x44,0x80,0x03,0x55,0x80,
0x03,0x44,0x80,0x03,0x55,0x80,0x03,0x44,0x80,0x03,0x55,0x80,0x03,0x44,0x80,0x03,
0x55,0x80,0x03,0x44,0x80,0x03,0x55,0x80,0x03,0x44,0x80,0x03,0x55,0x80,0x02,0x44,
0xF4,0x80,0x03,0x55,0x80,0x02,0x44,0xF4,0x80,0x03,0x55,0x80,0x03,0x44,0x80,0x03,
0x55,0x80,0x03,0x44,0x80,0x03,0x55,0x80,0x03,0x44,0x80,0x03,0x55,0x80,0x03,0x44,
0x80,0x03,0x55,0x80,0x03,0x44,0x80,0x03,0x55,0x80,0x03,0x44,0x80,0x03,0x55,0x80,
0x03,0x44,0x80,0x03,0x55,0x80,0x03,0x44,0x80,0x03,0x55,0x80,0x03,0x44,0x80,0x03,
0x55,0x80,0x03,0x44,0x80,0x03,0x55,0x80,0x03,0x44,0x80,0x02,0x55,0x80,0x04,0x44,
0x80,0x02,0x55,0x80,0x04,0x44,0x80,0x02,0x55,0x80,0x04,0x44,0x80,0x02,0x55,0x80,
0x04,0x44,0x80,0x02,0x55,0x80,0x04,0x44,0x80,0x02,0x55,0x80,0x04,0x44,0x80,0x02,
0x55,0x80,0x04,0x44,0x80,0x02,0x55,0x80,0x04,0x44,0x80,0x02,0x55,0x80,0x04,0x44,
0x80,0x02,0x55,0x80,0x04,0x44,0x80,0x02,0x55,0x80,0x04,0x44,0x80,0x02,0x55,0x80,
0x04,0x44,0x80,0x02,0x55,0x80,0x04,0x44,0x80,0x02,0x55,0x80,0x04,0x44,0x80,0x02,
0x55,0x80,0x04,0x44,0x80,0x02,0x55,0x80,0x04,0x44,0x80,0x02,0x55,0x80,0x04,0x44,
0x80,0x02,0x55,0x80,0x04,0x44,0x80,0x02,0x55,0x80,0x04,0x44,0x80,0x02,0x55,0x80,
0x04,0x44,0x80,0x02,0x55,0x80,0x04,0x44,0x80,0x02,0x55,0x80,0x04,0x44,0x80,0x02,
0x55,0x80,0x04,0x44,0x80,0x02,0x55,0x80,0x04,0x44,0x80,0x02,0x55,0x80,0x04,0x44,
0x80,0x02,0x55,0x80,0x04,0x44,0x80,0x02,0x55,0x80,0x04,0x44,0x80,0x02,0x55,0x80,
0x04,0x44,0x80,0x02,0x55,0x80,0x04,0x44,0x80,0x02,0x55,0x80,0x04,0x44,0x80,0x02,
0x55,0x80,0x04,0x44,0x80,0x02,0x55,0x80,0x04,0x44,0x55,0x55,0x80,0x05,0x44,0x55,
0x55,0x80,0x05,0x44,0x55,0x55,0x80,0x05,0x44,0x55,0x55,0x80,0x05,0x44,0x55,0x55,
0x80,0x05,0x44,0x55,0x55,0x80,0x05,0x44,0x55,0x55,0x80,0x05,0x44,0x55,0x55,0x80,
0x05,0x44,0x55,0x55,0x80,0x05,0x44,0x55,0x55,0x80,0x05,0x44,0x55,0x55,0x80,0x05,
0x44,0x55,0x55,0x80,0x05,0x44,0x55,0x55,0x80,0x05,0x44,0x55,0x55,0x80,0x05,0x44,
0x55,0x55,0x80,0x05,0x44,0x55,0x55,0x80,0x05,0x44,0x55,0x55,0x80,0x05,0x44,0x55,
0x55,0x80,0x05,0x44,0x55,0x55,0x80,0x05,0x44,0x55,0x55,0x80,0x05,0x44,0x55,0x55,
0x80,0x05,0x44,0x55,0x55,0x80,0x05,0x44,0x55,0x55,0x80,0x05,0x44,0x55,0x55,0x80,
0x05,0x44,0x55,0x55,0x80,0x05,0x44,0x55,0x55,0x80,0x05,0x44,0x55,0x55,0x80,0x05,
0x44,0x55,0xA5,0x80,0x05,0xA4,0xA5,0xA5,0x80,0x05,0xA4,0x55,0x55,0x80,0x05,0x44,
0x55,0x55,0x80,0x05,0x44,0x55,0x55,0x80,0x05,0x44,0x55,0x80,0x06,0x44,0x55,0x80,
0x06,0x44,0x55,0x80,0x06,0x44,0x55,0x80,0x04,0x44,0xC4,0xC4,0x55,0x80,0x03,0x44,
0xCC,0xCC,0x44,0x55,0x80,0x04,0x44,0xC4,0xC4,0xC5,0x80,0x06,0x4C,0xC5,0x80,0x06,
0x4C,0x80,0x04,0x5C,0x80,0x02,0xC4,0x55,0x44,0x80,0x05,0xC4,0x55,0x80,0x06,0x44,
0x55,0x80,0x06,0x44,0x55,0x80,0x06,0x44,0x55,0x80,0x06,0x44,0x55,0x80,0x06,0x44,
0x55,0x80,0x06,0x44,0x55,0x80,0x06,0x44,0x55,0x80,0x06,0x44,0x55,0x80,0x06,0x44,
0x55,0x80,0x06,0x44,0x55,0x80,0x06,0x44,0x55,0x80,0x06,0x44,0x55,0x80,0x06,0x44,
0x55,0x80,0x06,0x44,0x55,0x80,0x06,0x44,0x55,0x80,0x06,0x44,0x55,0x80,0x16,0xA4,
0xA5,0x80,0x06,0xA4,0x55,0x80,0x06,0x44,0x55,0x80,0x23,0x44,0x80,0xAB,0xC4,0x80,
0x47,0xA4,0x80,0x5F,0xC4,0x80,0xA7,0xA4,0x80,0x20,0xC4,0x6C,0x80,0x03,0x64,0x80,
0x29,0x4C,0x80,0xAD,0xA4,0x80,0x1F,0x4C,0x80,0x07,0x46,0x80,0x21,0xC4,0x80,0xC5,
0xA4,0x80,0x0F,0xC4,0x80,0x21,0x46,0x80,0xDD,0xA4,0x80,0x19,0x64,0x80,0xAD,0xA4,
0x80,0x37,0xBB,0x80,0x18,0x6B,0x80,0xEE,0xBA,0x80,0x20,0xB6,0x80,0xDE,0xBA,0x80,
0x10,0xB6,0x80,0x03,0x06,0x6B,0xCB,0xCB,0x80,0x0A,0x6B,0x80,0x03,0x0B,0xC0,0x80,
0x02,0xBB,0x80,0x05,0x0B,0x80,0xCE,0xBA,0x80,0x0F,0xB6,0x80,0x07,0xBC,0x6B,0xCC,
0x80,0x05,0x6B,0x80,0x04,0xC0,0x22,0xCC,0x22,0xB0,0xB0,0x0C,0x0C,0x6C,0x62,0x6C,
0x62,0x80,0x03,0xBB,0x80,0x0C,0x6B,0x80,0x92,0xBA,0x80,0x08,0x5B,0x80,0x02,0x75,
0xBB,0xBB,0x80,0x05,0x55,0xBB,0xBB,0x80,0x05,0x55,0xBB,0xBB,0x80,0x05,0x55,0xBB,
0xBB,0x80,0x05,0x5B,0xB6,0xB6,0xBA,0xBA,0x5A,0x5A,0x54,0x54,0x6B,0x6B,0x80,0x0D,
0xAB,0x80,0x07,0xB6,0xCC,0x22,0xCC,0x22,0x22,0x80,0x02,0x0B,0x6C,0x62,0x6C,0x62,
0x62,0x80,0x06,0x6B,0x80,0x25,0x0B,0xBC,0xBC,0x80,0x03,0x3C,0x80,0x06,0xBB,0x80,
0x39,0xB9,0x80,0x2E,0xBA,0x80,0x04,0x57,0x80,0x02,0xB5,0x77,0x55,0x55,0x80,0x24,
0x57,0x80,0x07,0x54,0x80,0x05,0x4B,0x80,0x09,0xAB,0x80,0x07,0x6B,0x80,0x07,0x0B,
0x80,0x07,0x6B,0x80,0x25,0x0B,0xBD,0xBD,0x00,0x90,0x80,0x02,0x9E,0xBE,0xDE,0xDE,
0xB9,0x80,0x4F,0xDB,0x80,0x1E,0xBA,0x80,0x10,0x5B,0x75,0x75,0x80,0x04,0xBB,0x80,
0x02,0x55,0x80,0x04,0xBB,0x80,0x02,0x55,0x80,0x04,0xBB,0x80,0x07,0xB5,0x80,0x17,
0xBA,0x6B,0x6B,0x80,0x0D,0xAB,0x6B,0x6B,0x80,0x25,0xAB,0x80,0x04,0xDB,0x80,0x02,
0xB9,0xED,0xED,0x80,0x05,0x4D,0x80,0x83,0xBB,0x80,0x6C,0xAB,0x80,0x06,0xDB,0x80,
0x06,0x4D,0xB4,0x80,0x05,0xDB,0x80,0x81,0x6B,0x80,0x67,0xBA,0xDB,0x80,0x03,0x6B,
0x80,0x02,0xAB,0x4B,0x80,0x05,0x6B,0xAA,0x80,0x03,0x6B,0x80,0xFE,0xAB,0x80,0xFE,
0xAB,0x80,0x27,0xAB,0x80,0x35,0xBF,0x80,0xFF};
// global variable definition --------------------------------------------------


// Functions -------------------------------------------------------------------


//
void main(void)
{
  char colorInk=0;
  char colorBG=0;
  char colorBDR=0;
  char scrcolumns=0;
  //char MSXsion=0;
  
  colorInk=PEEK(FORCLR);
  colorBG=PEEK(BAKCLR);
  colorBDR=PEEK(BDRCLR);
  scrcolumns=PEEK(LINLEN);
  
  
  testRLEWB();

//EXIT MSXDOS ------------------------------------------------------------------
  //put the screen as it was.
  COLOR(colorInk,colorBG,colorBDR);
  //WIDTH(scrcolumns);

  if(scrcolumns<33) SCREEN(1);
  else SCREEN(0);
  //
    
  System(_TERM0); 
//--------------------------------------------------------------------- end EXIT

}



// call system functions 
// see MSX Assembly Page > MSX-DOS 2 function calls
// http://map.grauw.nl/resources/dos2_functioncalls.php
void System(char code)
{
code;
__asm
	push IX
	ld   IX,#0
	add  IX,SP

	ld   C,4(IX)
	call SYSTEM

	pop  IX
__endasm; 
}



char PEEK(uint address)
{
address;
__asm
  push IX
  ld   IX,#0
  add  IX,SP
    
  ld   L,4(IX)
  ld   H,5(IX)
  ld   L,(HL)

  pop  IX
__endasm;
}



void POKE(uint address, char value)
{
address;value;
__asm
  push IX
  ld   IX,#0
  add  IX,SP 
    
  ld   L,4(IX)
  ld   H,5(IX)
  ld   A,6(IX)
  ld   (HL),A

  pop  IX  
__endasm;
}







/* =============================================================================
One character input (waiting)
============================================================================= */
char INKEY()
{
__asm   
  push IX
  ld   IX,#0
  add  IX,SP
  
  ld   IX,#CHGET
  ld   IY,(EXPTBL-1)
  call CALSLT
  ei
  
  ld   L,A
  pop  IX
__endasm;
}





// Generates a pause in the execution of n interruptions.
// PAL: 50=1second. ; NTSC: 60=1second. 
void WAIT(uint cicles)
{
  uint i;
  for(i=0;i<cicles;i++) HALT;
  return;
}




// TEST functions ##############################################################
void testRLEWB()
{
  COLOR(0,0,1);
  SCREEN(2);
//  setSpritesSize(0);
//  setSpritesZoom(true);
  
  unRLEWBtoVRAM ((unsigned int) TILESET_pat, BASE12);
  unRLEWBtoVRAM ((unsigned int) TILESET_col, BASE11);
  
  INKEY();
   
}
//########################################################### END TEST functions
